{"openapi":"3.1.0","info":{"title":"cgn-ec","description":"Flexible solution for your CGNAT logging needs","version":"0.1.0"},"paths":{"/v1/address_mappings/":{"get":{"summary":"Get Address Mappings","operationId":"get_address_mappings_v1_address_mappings__get","security":[{"APIKeyHeader":[]}],"parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"exclusiveMinimum":0,"default":100,"title":"Limit"}},{"name":"skip","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0,"title":"Skip"}},{"name":"event","in":"query","required":false,"schema":{"anyOf":[{"type":"integer","minimum":1},{"type":"null"}],"title":"Event"}},{"name":"order_by","in":"query","required":false,"schema":{"type":"string","pattern":"^\\w+( (asc|desc))?$","default":"timestamp","title":"Order By"}},{"name":"vrf_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Vrf Id"}},{"name":"src_ip","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Src Ip"}},{"name":"x_ip","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X Ip"}},{"name":"timestamp_le","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Timestamp Le"}},{"name":"timestamp_ge","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Timestamp Ge"}},{"name":"hook","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Hook"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/NATAddressMappingRead"},"title":"Response Get Address Mappings V1 Address Mappings  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/port_block_mappings/":{"get":{"summary":"Get Port Block Mappings","operationId":"get_port_block_mappings_v1_port_block_mappings__get","security":[{"APIKeyHeader":[]}],"parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"exclusiveMinimum":0,"default":100,"title":"Limit"}},{"name":"skip","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0,"title":"Skip"}},{"name":"event","in":"query","required":false,"schema":{"anyOf":[{"type":"integer","minimum":1},{"type":"null"}],"title":"Event"}},{"name":"order_by","in":"query","required":false,"schema":{"type":"string","pattern":"^\\w+( (asc|desc))?$","default":"timestamp","title":"Order By"}},{"name":"vrf_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Vrf Id"}},{"name":"src_ip","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Src Ip"}},{"name":"x_ip","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X Ip"}},{"name":"start_port","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Start Port"}},{"name":"end_port","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"End Port"}},{"name":"timestamp_le","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Timestamp Le"}},{"name":"timestamp_ge","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Timestamp Ge"}},{"name":"hook","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Hook"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/NATPortBlockMappingRead"},"title":"Response Get Port Block Mappings V1 Port Block Mappings  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/port_mappings/":{"get":{"summary":"Get Port Mappings","operationId":"get_port_mappings_v1_port_mappings__get","security":[{"APIKeyHeader":[]}],"parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"exclusiveMinimum":0,"default":100,"title":"Limit"}},{"name":"skip","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0,"title":"Skip"}},{"name":"event","in":"query","required":false,"schema":{"anyOf":[{"type":"integer","minimum":1},{"type":"null"}],"title":"Event"}},{"name":"order_by","in":"query","required":false,"schema":{"type":"string","pattern":"^\\w+( (asc|desc))?$","default":"timestamp","title":"Order By"}},{"name":"vrf_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Vrf Id"}},{"name":"protocol","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Protocol"}},{"name":"x_ip","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X Ip"}},{"name":"x_port","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"X Port"}},{"name":"src_ip","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Src Ip"}},{"name":"src_port","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Src Port"}},{"name":"timestamp_le","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Timestamp Le"}},{"name":"timestamp_ge","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Timestamp Ge"}},{"name":"hook","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Hook"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/NATPortMappingRead"},"title":"Response Get Port Mappings V1 Port Mappings  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/session_mappings/":{"get":{"summary":"Get Session Mappings","operationId":"get_session_mappings_v1_session_mappings__get","security":[{"APIKeyHeader":[]}],"parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"exclusiveMinimum":0,"default":100,"title":"Limit"}},{"name":"skip","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0,"title":"Skip"}},{"name":"event","in":"query","required":false,"schema":{"anyOf":[{"type":"integer","minimum":1},{"type":"null"}],"title":"Event"}},{"name":"order_by","in":"query","required":false,"schema":{"type":"string","pattern":"^\\w+( (asc|desc))?$","default":"timestamp","title":"Order By"}},{"name":"vrf_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Vrf Id"}},{"name":"protocol","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Protocol"}},{"name":"x_ip","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X Ip"}},{"name":"x_port","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"X Port"}},{"name":"dst_ip","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Dst Ip"}},{"name":"dst_port","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Dst Port"}},{"name":"src_ip","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Src Ip"}},{"name":"src_port","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Src Port"}},{"name":"timestamp_le","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Timestamp Le"}},{"name":"timestamp_ge","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Timestamp Ge"}},{"name":"hook","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Hook"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/NATSessionMappingRead"},"title":"Response Get Session Mappings V1 Session Mappings  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/deterministic_nat/":{"get":{"summary":"Get Deterministic Nat Mapping","operationId":"get_deterministic_nat_mapping_v1_deterministic_nat__get","security":[{"APIKeyHeader":[]}],"parameters":[{"name":"x_ip","in":"query","required":false,"schema":{"type":"string","title":"X Ip"}},{"name":"x_port","in":"query","required":false,"schema":{"type":"integer","title":"X Port"}},{"name":"timestamp_gt","in":"query","required":false,"schema":{"type":"string","format":"date-time","title":"Timestamp Gt"}},{"name":"timestamp_lt","in":"query","required":false,"schema":{"type":"string","format":"date-time","default":"2025-06-14T13:30:43.271157Z","title":"Timestamp Lt"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Limit"}},{"name":"skip","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Skip"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/NATSessionMapping"},"title":"Response Get Deterministic Nat Mapping V1 Deterministic Nat  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/admin/hypertable/{hyper_table}/chunks":{"get":{"tags":["admin"],"summary":"Get Hyper Table Chunks","operationId":"get_hyper_table_chunks_v1_admin_hypertable__hyper_table__chunks_get","security":[{"APIKeyHeader":[]}],"parameters":[{"name":"hyper_table","in":"path","required":true,"schema":{"type":"string","title":"Hyper Table"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/HyperTableChunk"},"title":"Response Get Hyper Table Chunks V1 Admin Hypertable  Hyper Table  Chunks Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/admin/hypertable/{hyper_table}/chunks_stats":{"get":{"tags":["admin"],"summary":"Get Hyper Table Chunks Stats","operationId":"get_hyper_table_chunks_stats_v1_admin_hypertable__hyper_table__chunks_stats_get","security":[{"APIKeyHeader":[]}],"parameters":[{"name":"hyper_table","in":"path","required":true,"schema":{"type":"string","title":"Hyper Table"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/HyperTableCompressionStats"},"title":"Response Get Hyper Table Chunks Stats V1 Admin Hypertable  Hyper Table  Chunks Stats Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/admin/hypertable/{hyper_table}/size":{"get":{"tags":["admin"],"summary":"Get Hyper Table Size","operationId":"get_hyper_table_size_v1_admin_hypertable__hyper_table__size_get","security":[{"APIKeyHeader":[]}],"parameters":[{"name":"hyper_table","in":"path","required":true,"schema":{"type":"string","title":"Hyper Table"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"integer","title":"Response Get Hyper Table Size V1 Admin Hypertable  Hyper Table  Size Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"HookMetadata":{"properties":{"data":{"type":"object","title":"Data","default":{}},"error":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error"}},"type":"object","title":"HookMetadata"},"HyperTableChunk":{"properties":{"hypertable_schema":{"type":"string","title":"Hypertable Schema"},"hypertable_name":{"type":"string","title":"Hypertable Name"},"chunk_schema":{"type":"string","title":"Chunk Schema"},"chunk_name":{"type":"string","title":"Chunk Name"},"primary_dimension":{"type":"string","title":"Primary Dimension"},"primary_dimension_type":{"type":"string","title":"Primary Dimension Type"},"range_start":{"type":"string","format":"date-time","title":"Range Start"},"range_end":{"type":"string","format":"date-time","title":"Range End"},"range_start_integer":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Range Start Integer"},"range_end_integer":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Range End Integer"},"is_compressed":{"type":"boolean","title":"Is Compressed"},"chunk_tablespace":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Chunk Tablespace"},"chunk_creation_time":{"type":"string","format":"date-time","title":"Chunk Creation Time"}},"type":"object","required":["hypertable_schema","hypertable_name","chunk_schema","chunk_name","primary_dimension","primary_dimension_type","range_start","range_end","is_compressed","chunk_creation_time"],"title":"HyperTableChunk","example":{"chunk_creation_time":"2025-03-20T07:22:54.684684Z","chunk_name":"_hyper_1_3_chunk","chunk_schema":"_timescaledb_internal","hypertable_name":"session_mapping","hypertable_schema":"public","is_compressed":true,"primary_dimension":"timestamp","primary_dimension_type":"timestamp with time zone","range_end":"2025-03-20T08:00:00Z","range_start":"2025-03-20T07:00:00Z"}},"HyperTableCompressionStats":{"properties":{"chunk_schema":{"type":"string","title":"Chunk Schema"},"chunk_name":{"type":"string","title":"Chunk Name"},"compression_status":{"type":"string","title":"Compression Status"},"before_compression_table_bytes":{"type":"integer","title":"Before Compression Table Bytes"},"before_compression_index_bytes":{"type":"integer","title":"Before Compression Index Bytes"},"before_compression_toast_bytes":{"type":"integer","title":"Before Compression Toast Bytes"},"before_compression_total_bytes":{"type":"integer","title":"Before Compression Total Bytes"},"after_compression_table_bytes":{"type":"integer","title":"After Compression Table Bytes"},"after_compression_index_bytes":{"type":"integer","title":"After Compression Index Bytes"},"after_compression_toast_bytes":{"type":"integer","title":"After Compression Toast Bytes"},"after_compression_total_bytes":{"type":"integer","title":"After Compression Total Bytes"},"node_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Node Name"}},"type":"object","required":["chunk_schema","chunk_name","compression_status","before_compression_table_bytes","before_compression_index_bytes","before_compression_toast_bytes","before_compression_total_bytes","after_compression_table_bytes","after_compression_index_bytes","after_compression_toast_bytes","after_compression_total_bytes"],"title":"HyperTableCompressionStats","example":{"after_compression_index_bytes":16384,"after_compression_table_bytes":16384,"after_compression_toast_bytes":8192,"after_compression_total_bytes":40960,"before_compression_index_bytes":16384,"before_compression_table_bytes":8192,"before_compression_toast_bytes":8192,"before_compression_total_bytes":32768,"chunk_name":"_hyper_1_1_chunk","chunk_schema":"_timescaledb_internal","compression_status":"Compressed"}},"NATAddressMappingRead":{"properties":{"timestamp":{"type":"string","format":"date-time","title":"Timestamp"},"hook_metadata":{"anyOf":[{"$ref":"#/components/schemas/HookMetadata"},{"type":"null"}]},"host":{"type":"string","format":"ipv4","title":"Host"},"event":{"type":"integer","title":"Event"},"vrf_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Vrf Id"},"src_ip":{"type":"string","format":"ipv4","title":"Src Ip"},"x_ip":{"type":"string","format":"ipv4","title":"X Ip"}},"type":"object","required":["timestamp","host","event","src_ip","x_ip"],"title":"NATAddressMappingRead"},"NATEventTypeEnum":{"type":"integer","enum":[1,2,3],"title":"NATEventTypeEnum"},"NATPortBlockMappingRead":{"properties":{"timestamp":{"type":"string","format":"date-time","title":"Timestamp"},"hook_metadata":{"anyOf":[{"$ref":"#/components/schemas/HookMetadata"},{"type":"null"}]},"host":{"type":"string","format":"ipv4","title":"Host"},"event":{"type":"integer","title":"Event"},"vrf_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Vrf Id"},"src_ip":{"type":"string","format":"ipv4","title":"Src Ip"},"x_ip":{"type":"string","format":"ipv4","title":"X Ip"},"start_port":{"type":"integer","title":"Start Port"},"end_port":{"type":"integer","title":"End Port"}},"type":"object","required":["timestamp","host","event","src_ip","x_ip","start_port","end_port"],"title":"NATPortBlockMappingRead"},"NATPortMappingRead":{"properties":{"timestamp":{"type":"string","format":"date-time","title":"Timestamp"},"hook_metadata":{"anyOf":[{"$ref":"#/components/schemas/HookMetadata"},{"type":"null"}]},"host":{"type":"string","format":"ipv4","title":"Host"},"event":{"type":"integer","title":"Event"},"vrf_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Vrf Id"},"protocol":{"type":"integer","title":"Protocol"},"src_ip":{"type":"string","format":"ipv4","title":"Src Ip"},"src_port":{"type":"integer","title":"Src Port"},"x_ip":{"type":"string","format":"ipv4","title":"X Ip"},"x_port":{"type":"integer","title":"X Port"}},"type":"object","required":["timestamp","host","event","protocol","src_ip","src_port","x_ip","x_port"],"title":"NATPortMappingRead"},"NATSessionMapping":{"properties":{"timestamp":{"type":"string","format":"date-time","title":"Timestamp"},"host":{"anyOf":[{"type":"string","format":"ipv4"},{"type":"string","format":"ipv6"}],"title":"Host"},"event":{"$ref":"#/components/schemas/NATEventTypeEnum"},"vrf_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Vrf Id"},"protocol":{"type":"integer","title":"Protocol"},"src_ip":{"type":"string","format":"ipv4","title":"Src Ip"},"src_port":{"type":"integer","title":"Src Port"},"x_ip":{"type":"string","format":"ipv4","title":"X Ip"},"x_port":{"type":"integer","title":"X Port"},"dst_ip":{"type":"string","format":"ipv4","title":"Dst Ip"},"dst_port":{"type":"integer","title":"Dst Port"}},"type":"object","required":["timestamp","host","event","protocol","src_ip","src_port","x_ip","x_port","dst_ip","dst_port"],"title":"NATSessionMapping"},"NATSessionMappingRead":{"properties":{"timestamp":{"type":"string","format":"date-time","title":"Timestamp"},"hook_metadata":{"anyOf":[{"$ref":"#/components/schemas/HookMetadata"},{"type":"null"}]},"host":{"type":"string","format":"ipv4","title":"Host"},"event":{"type":"integer","title":"Event"},"vrf_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Vrf Id"},"protocol":{"type":"integer","title":"Protocol"},"src_ip":{"type":"string","format":"ipv4","title":"Src Ip"},"src_port":{"type":"integer","title":"Src Port"},"x_ip":{"type":"string","format":"ipv4","title":"X Ip"},"x_port":{"type":"integer","title":"X Port"},"dst_ip":{"type":"string","format":"ipv4","title":"Dst Ip"},"dst_port":{"type":"integer","title":"Dst Port"}},"type":"object","required":["timestamp","host","event","protocol","src_ip","src_port","x_ip","x_port","dst_ip","dst_port"],"title":"NATSessionMappingRead"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}},"securitySchemes":{"APIKeyHeader":{"type":"apiKey","in":"header","name":"x-api-key"}}}}